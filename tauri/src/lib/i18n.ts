import { useConfig } from "@/contexts/ConfigContext";

const translations: Record<string, Record<string, string>> = {
    "zh-CN": {
        "common.home": "首页",
        "common.migrate": "迁移流程",
        "common.accounts": "账号管理",
        "common.settings": "设置",
        "common.back": "返回首页",
        "common.search": "搜索...",
        "common.delete": "删除",
        "common.cancel": "取消",
        "common.confirm": "确认",
        "common.loading": "加载中...",
        "common.success": "操作成功",
        "common.error": "操作失败",
        "common.save": "保存",
        "common.edit": "编辑",
        "common.add": "添加",
        "common.close": "关闭",
        "common.refresh": "刷新",
        "common.pagination.total": "共 {total} 条",
        "common.pagination.page": "第 {page} 页，共 {total} 页",
        "common.pagination.per_page": "每页",
        "common.pagination.unit": "条",
        "login.title": "影刀工具",
        "login.subtitle": "请登录以继续使用",
        "login.username": "用户名",
        "login.password": "密码",
        "login.button": "登录",
        "login.logging_in": "登录中...",
        "login.success": "登录成功！",
        "login.error": "登录失败，请检查用户名和密码",
        "login.footer": "© 2026 影刀工具 · 安全登录",
        "home.welcome": "欢迎使用影刀工具",
        "home.subtitle": "选择一个功能开始",
        "home.migrate.title": "迁移流程",
        "home.migrate.desc": "本地或云端流程迁移到其他账号",
        "home.accounts.title": "账号管理",
        "home.accounts.desc": "添加、编辑或删除您的影刀账号",
        "migrate.title": "迁移流程",
        "migrate.subtitle": "选择迁移方式",
        "migrate.local": "本地迁移",
        "migrate.local.desc": "将本地缓存的流程迁移到指定账号",
        "migrate.cloud": "云端迁移",
        "migrate.cloud.desc": "从一个账号迁移流程到另一个账号",
        "migrate.step.source": "选择来源账号",
        "migrate.step.list": "选择流程",
        "migrate.step.target": "选择目标账号",
        "migrate.step.migrating": "正在迁移",
        "migrate.step.result": "迁移结果",
        "migrate.local.scan": "正在扫描本地流程...",
        "migrate.local.scanning": "正在扫描本地流程...",
        "migrate.cloud.login": "正在登录并获取流程...",
        "migrate.cloud.fetching": "正在登录并获取流程...",
        "migrate.cloud.fetch_button": "开始获取流程",
        "migrate.target.logging_in": "正在登录目标账号...",
        "migrate.migrating_count": "正在迁移 {count} 个流程...",
        "migrate.target.select": "选择目标账号",
        "migrate.source.select": "选择来源账号",
        "migrate.target.manual": "手动输入",
        "migrate.target.username": "用户名",
        "migrate.target.password": "密码",
        "accounts.title": "账号管理",
        "accounts.add": "添加账号",
        "accounts.search": "搜索账号...",
        "accounts.list": "账号列表",
        "accounts.detail": "账号详情",
        "accounts.delete.confirm": "确认要删除账号 \"{name}\" 吗？",
        "accounts.delete.desc": "这只会从本地移除账号配置，不会影响云端数据。",
        "accounts.flow.name": "流程名称",
        "accounts.flow.update_time": "更新时间",
        "accounts.flow.total": "共 {count} 个流程",
        "accounts.flow.selected": "已选 {count} 个流程",
        "accounts.delete.flows.confirm": "确定要删除选中的 {count} 个流程吗？",
        "accounts.delete.flows.desc": "流程将被移入回收站，可在影刀网页版中恢复。",
        "sidebar.theme.light": "浅色模式",
        "sidebar.theme.dark": "深色模式",
        "sidebar.theme.system": "跟随系统",
        "sidebar.logout": "退出登录",
        "sidebar.admin": "管理员",
        "sidebar.user": "普通用户",
        "settings.title": "系统设置",
        "settings.general": "通用设置",
        "settings.about": "关于软件",
        "settings.language": "语言设置",
        "settings.language.desc": "选择软件显示的界面语言",
        "settings.language.label": "界面语言",
        "settings.theme": "外观设置",
        "settings.theme.desc": "选择您喜欢的主题风格",
        "settings.theme.label": "界面主题",
        "settings.theme.light": "明亮",
        "settings.theme.dark": "暗黑",
        "settings.theme.system": "自动",
        "settings.update": "软件更新",
        "settings.update.desc": "启动时自动检查最新的版本",
        "settings.update.label": "启用自动更新",
        "settings.check_update": "检查更新",
        "settings.check_update.checking": "正在检查...",
        "settings.check_update.latest": "当前已是最新版本",
        "settings.check_update.found": "发现新版本 {version}",
        "accounts.add.desc": "添加一个新的影刀账号（将自动验证账号密码）",
        "accounts.edit.desc": "修改账号信息",
        "accounts.verifying": "正在验证账号...",
        "accounts.verify_failed": "账号验证失败",
        "accounts.expired.title": "登录已过期",
        "accounts.expired.desc": "账号 \"{name}\" 的登录状态已过期，请重新输入密码",
        "accounts.relogin": "重新登录",
        "settings.check_update.download": "下载",
        "settings.check_update.downloading": "正在下载...",
        "settings.check_update.download_failed": "下载失败",
        "settings.check_update.installing": "正在安装并重启...",
        "settings.app.title": "影刀工具",
        "settings.app.subtitle": "影刀账号管理界面",
        "settings.app.author": "开发者",
        "settings.app.support": "赞助支持",
        "settings.app.support_author": "Ethan",
    },
    "en-US": {
        "common.home": "Home",
        "common.migrate": "Migration",
        "common.accounts": "Accounts",
        "common.settings": "Settings",
        "common.back": "Back to Home",
        "common.search": "Search...",
        "common.delete": "Delete",
        "common.cancel": "Cancel",
        "common.confirm": "Confirm",
        "common.loading": "Loading...",
        "common.success": "Success",
        "common.error": "Error",
        "common.save": "Save",
        "common.edit": "Edit",
        "common.add": "Add",
        "common.close": "Close",
        "common.refresh": "Refresh",
        "common.pagination.total": "Total {total}",
        "common.pagination.page": "Page {page} of {total}",
        "common.pagination.per_page": "Per page",
        "common.pagination.unit": "items",
        "login.title": "Yingdao Tools",
        "login.subtitle": "Please sign in to continue",
        "login.username": "Username",
        "login.password": "Password",
        "login.button": "Sign In",
        "login.logging_in": "Signing in...",
        "login.success": "Signed in successfully!",
        "login.error": "Login failed, please check username and password",
        "login.footer": "© 2026 Yingdao Tools · Secure Login",
        "home.welcome": "Welcome to Yingdao Tools",
        "home.subtitle": "Choose a feature to get started",
        "home.migrate.title": "Migrate Flows",
        "home.migrate.desc": "Migrate local or cloud flows to other accounts",
        "home.accounts.title": "Account Management",
        "home.accounts.desc": "Add, edit or delete your Yingdao accounts",
        "migrate.title": "Migration",
        "migrate.subtitle": "Choose migration method",
        "migrate.local": "Local Migration",
        "migrate.local.desc": "Migrate locally cached flows to a target account",
        "migrate.cloud": "Cloud Migration",
        "migrate.cloud.desc": "Migrate flows from one account to another",
        "migrate.step.source": "Select Source",
        "migrate.step.list": "Select Flows",
        "migrate.step.target": "Select Target",
        "migrate.step.migrating": "Migrating",
        "migrate.step.result": "Result",
        "migrate.local.scan": "Scanning local flows...",
        "migrate.local.scanning": "Scanning local flows...",
        "migrate.cloud.login": "Logging in and fetching flows...",
        "migrate.cloud.fetching": "Logging in and fetching flows...",
        "migrate.cloud.fetch_button": "Start Fetching",
        "migrate.target.logging_in": "Logging into target account...",
        "migrate.migrating_count": "Migrating {count} flows...",
        "migrate.target.select": "Select Target Account",
        "migrate.source.select": "Select Source Account",
        "migrate.target.manual": "Manual Input",
        "migrate.target.username": "Username",
        "migrate.target.password": "Password",
        "accounts.title": "Accounts",
        "accounts.add": "Add Account",
        "accounts.search": "Search accounts...",
        "accounts.list": "Account List",
        "accounts.detail": "Account Detail",
        "accounts.delete.confirm": "Are you sure you want to delete account \"{name}\"?",
        "accounts.delete.desc": "This only removes config locally, cloud data is unaffected.",
        "accounts.flow.name": "Flow Name",
        "accounts.flow.update_time": "Update Time",
        "accounts.flow.total": "Total {count} flows",
        "accounts.flow.selected": "{count} flows selected",
        "accounts.delete.flows.confirm": "Are you sure you want to delete {count} selected flows?",
        "accounts.delete.flows.desc": "Flows will be moved to trash, you can restore them on Yingdao web.",
        "sidebar.theme.light": "Light Mode",
        "sidebar.theme.dark": "Dark Mode",
        "sidebar.theme.system": "System",
        "sidebar.logout": "Sign Out",
        "sidebar.admin": "Admin",
        "sidebar.user": "User",
        "settings.title": "Settings",
        "settings.general": "General",
        "settings.about": "About",
        "settings.language": "Language",
        "settings.language.desc": "Select the interface language",
        "settings.language.label": "Language",
        "settings.theme": "Appearance",
        "settings.theme.desc": "Select your preferred theme",
        "settings.theme.label": "Theme",
        "settings.theme.light": "Light",
        "settings.theme.dark": "Dark",
        "settings.theme.system": "Auto",
        "settings.update": "Updates",
        "settings.update.desc": "Automatically check for updates on startup",
        "settings.update.label": "Enable Auto Update",
        "settings.check_update": "Check Updates",
        "settings.check_update.checking": "Checking...",
        "settings.check_update.latest": "You are up to date",
        "settings.check_update.found": "New version {version} found",
        "accounts.add.desc": "Add a new Yingdao account (will auto-verify password)",
        "accounts.edit.desc": "Modify account information",
        "accounts.verifying": "Verifying account...",
        "accounts.verify_failed": "Account verification failed",
        "accounts.expired.title": "Login Expired",
        "accounts.expired.desc": "Login state for \"{name}\" has expired, please re-enter password",
        "accounts.relogin": "Re-login",
        "settings.check_update.download": "Download",
        "settings.check_update.downloading": "Downloading...",
        "settings.check_update.download_failed": "Download Failed",
        "settings.check_update.installing": "Installing and restarting...",
        "settings.app.title": "Yingdao Tools",
        "settings.app.subtitle": "Professional Account Management",
        "settings.app.author": "Developer",
        "settings.app.support": "Support",
        "settings.app.support_author": "Ethan",
    }
};

export type Language = keyof typeof translations;
export type TranslationKey = string;

// Standalone t function for non-hook usage (e.g., Sidebar which receives language via props)
export function t(key: string, language: string = "zh-CN"): string {
    const lang = language in translations ? language : "zh-CN";
    return translations[lang]?.[key] || key;
}

// Hook-based translation for React components
export function useTranslation() {
    const { settings } = useConfig();
    const language = (settings.language as Language) || "zh-CN";

    const translate = (key: string) => {
        return t(key, language);
    };

    return { t: translate, language };
}
